<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <meta charset="utf-8" />
  </head>
  <body>
    <canvas id="canvas" width="300" height="300" style="border:1px solid silver;"></canvas>

    <script type="text/javascript">
      var canvas = document.getElementById('canvas')
      var ctx = canvas.getContext("2d")
      
      var x = canvas.width / 2
      var y = canvas.height / 2
      var r = 20

      // 随机产生-3 ~ 3之间的任意数，作为vx、vy的值
      var vx = (Math.random() * 2 - 1) * 3
      var vy = (Math.random() * 2 - 1) * 3
      
      // 画圆
      function drawArc () {
        ctx.beginPath()
        ctx.arc(x, y, r, 0, Math.PI * 2)
        ctx.fillStyle = 'blue'
        ctx.fill()
      }

      ;(function frame () {
        window.requestAnimationFrame(frame)
        ctx.clearRect(0, 0, canvas.width, canvas.height)

        x += vx
        y += vy

        // 边界检测
        // 碰到左边界
        if (x < r) {
          x = r
          vx = -vx
        // 碰到右边界
        } else if (x > canvas.width - r) {
          x = canvas.width - r
          vx = -vx
        }
        // 碰到上边界
        if (y < r) {
          y = r
          vy = -vy
        // 碰到下边界
        } else if (y > canvas.height - r) {
          y = canvas.height - r
          vy = -vy
        }

        drawArc()
      })()
    </script>
  </body>
</html>
